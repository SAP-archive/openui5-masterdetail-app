/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/events/KeyCodes","sap/m/ListBase","sap/ui/base/ManagedObjectObserver","sap/ui/layout/cssgrid/GridLayoutDelegate","sap/ui/layout/cssgrid/GridLayoutBase","./GridListRenderer"],function(e,t,i,o,r,a){"use strict";var s=i.extend("sap.f.GridList",{metadata:{library:"sap.f",interfaces:["sap.ui.layout.cssgrid.IGridConfigurable","sap.f.dnd.IGridDroppable"],aggregations:{customLayout:{type:"sap.ui.layout.cssgrid.GridLayoutBase",multiple:false}}}});s.prototype.init=function(){i.prototype.init.apply(this,arguments);this._oItemDelegate={onAfterRendering:this._onAfterItemRendering};this._addGridLayoutDelegate();this._oGridObserver=new o(s.prototype._onGridChange.bind(this));this._oGridObserver.observe(this,{aggregations:["items"]})};s.prototype.exit=function(){this._removeGridLayoutDelegate();if(this._oGridObserver){this._oGridObserver.disconnect();this._oGridObserver=null}i.prototype.exit.apply(this,arguments)};s.prototype.getGridDomRefs=function(){return[this.getItemsContainerDomRef()]};s.prototype.getGridLayoutConfiguration=s.prototype.getCustomLayout;s.prototype._addGridLayoutDelegate=function(){if(!this.oGridLayoutDelegate){this.oGridLayoutDelegate=new r;this.addEventDelegate(this.oGridLayoutDelegate,this)}};s.prototype._removeGridLayoutDelegate=function(){if(this.oGridLayoutDelegate){this.removeEventDelegate(this.oGridLayoutDelegate);this.oGridLayoutDelegate.destroy();this.oGridLayoutDelegate=null}};s.prototype._onGridChange=function(e){if(e.name!=="items"||!e.child){return}if(e.mutation==="insert"){e.child.addEventDelegate(this._oItemDelegate,e.child)}else if(e.mutation==="remove"){e.child.removeEventDelegate(this._oItemDelegate,e.child)}};s.prototype._onAfterItemRendering=function(){a.setItemStyles(this)};s.prototype.onLayoutDataChange=function(e){a.setItemStyles(e.srcControl)};s.prototype.onsapnext=function(e){var i=this._oItemNavigation;if(!i){return}if(e.keyCode===t.ARROW_RIGHT){i.onsapnext({keyCode:t.ARROW_DOWN,target:e.target,preventDefault:e.preventDefault,stopPropagation:e.stopPropagation})}};s.prototype.onsapprevious=function(e){var i=this._oItemNavigation;if(!i){return}if(e.keyCode===t.ARROW_LEFT){i.onsapprevious({keyCode:t.ARROW_UP,target:e.target,preventDefault:e.preventDefault,stopPropagation:e.stopPropagation})}};return s});