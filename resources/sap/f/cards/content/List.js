/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/m/List","sap/m/StandardListItem","sap/ui/base/ManagedObject","sap/f/cards/Data"],function(t,e,i,s,n,o,a){"use strict";var r=e.extend("sap.f.cards.content.List",{metadata:{properties:{data:{type:"object"},item:{type:"object"}},aggregations:{_content:{multiple:false,visibility:"hidden"}}},renderer:function(t,e){t.write("<div");t.writeElementData(e);t.write(">");t.renderControl(e.getAggregation("_content"));t.write("</div>")}});r.prototype.init=function(){this.oList=new s({id:this.getId()+"-list",growing:false,showNoData:false,showSeparators:"None"});var t=this;this.oList.attachUpdateFinished(function(){if(t._iVisibleItems){var e=this.oList.getItems();for(var i=t._iVisibleItems+1;i<e.length;i++){e[i].setVisible(false)}}}.bind(this));this.setAggregation("_content",this.oList);var e=new i;this.setModel(e);this._oItemTemplate=new n({iconDensityAware:false,iconInset:false})};r.prototype.exit=function(){if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null}if(this.oList){this.oList.destroy();this.oList=null}};r.prototype.destroy=function(){this.setAggregation("_content",null);this.setModel(null);return e.prototype.destroy.apply(this,arguments)};r.prototype.setItem=function(t){this.setProperty("item",t,true);if(!t){return this}this._oItemTemplate.bindProperty("title",o.bindingParser(t["title"].value));this._oItemTemplate.bindProperty("description",o.bindingParser(t["description"].value));this._oItemTemplate.bindProperty("icon",o.bindingParser(t["icon"].value));var e=this.getAggregation("_content");if(e.isBound("items")){e.bindItems({path:e.getBindingInfo("items").path,template:this._oItemTemplate})}return this};r.prototype.setData=function(t){this.setProperty("data",t,true);if(!t){return this}var e=t.request;if(t.json&&!e){this._updateModel(t.json,t.path)}if(e){a.fetch(e).then(function(e){this._updateModel(e,t.path)}.bind(this)).catch(function(t){})}return this};r.prototype._updateModel=function(t,e){this.getModel().setData(t);this.getAggregation("_content").bindItems({path:e||"/",template:this._oItemTemplate})};return r});