/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define([],function(){"use strict";var e={};var t="actions";e.applyChange=function(e,n,r){var o=r.modifier;var a=r.view;var i=r.appComponent;var g=e.getDefinition().content.movedElements[0];var s=g.targetIndex;var c;var d;return Promise.resolve().then(o.bySelector.bind(o,g.selector,i,a)).then(function(e){c=e;return o.getAggregation(n,t)}).then(function(r){var g;r.some(function(e,r){if(o.getId(e)===o.getId(c)){d=r;g=Promise.resolve().then(o.removeAggregation.bind(o,n,t,e)).then(o.insertAggregation.bind(o,n,"dependents",e,undefined,a));return true}return false});return g.then(function(){e.setRevertData({index:d,sourceParent:o.getSelector(n,i),aggregation:t});return o.insertAggregation(n,t,c,s,a)})})};e.revertChange=function(e,n,r){var o=r.modifier;var a=r.view;var i=r.appComponent;var g=e.getDefinition().content.movedElements[0];var s=e.getRevertData();var c;var d;var v;c=o.bySelector(g.selector,i,a);d=s?s.index:g.targetIndex;v=g.sourceIndex;return Promise.resolve().then(o.removeAggregation.bind(o,n,t,c,d,a)).then(o.insertAggregation.bind(o,n,t,c,v,a))};e.completeChangeContent=function(e,t,n){var r=n.modifier,o=n.appComponent,a=e.getDefinition();a.content={movedElements:[],targetAggregation:t.target.aggregation,targetContainer:t.selector};t.movedElements.forEach(function(e){var t=e.element||r.bySelector(e.id,o);a.content.movedElements.push({selector:r.getSelector(t,o),sourceIndex:e.sourceIndex,targetIndex:e.targetIndex})})};e.getCondenserInfo=function(e){var t=e.getContent();var n=e.getRevertData();return{affectedControl:t.movedElements[0].selector,classification:sap.ui.fl.condenser.Classification.Move,sourceContainer:n.sourceParent,targetContainer:t.targetContainer,sourceIndex:n.index,sourceAggregation:n.aggregation,targetAggregation:t.targetAggregation,setTargetIndex:function(e,t){e.getContent().movedElements[0].targetIndex=t},getTargetIndex:function(e){return e.getContent().movedElements[0].targetIndex}}};return e},true);